<!--
 * Copyright (c) 2015-2018 IPT-Intellectual Products & Technologies (IPT).
 * All rights reserved.
 * 
 * This software provided by IPT-Intellectual Products & Technologies (IPT) is for 
 * non-commercial illustartive and evaluation purposes only. 
 * It is NOT SUITABLE FOR PRODUCTION purposes because it is not finished,
 * and contains security flÐ°ws and weaknesses (like sending the passwords and 
 * emails of users to the browser client, wich YOU SHOULD NEVER DO with real user
 * data). You should NEVER USE THIS SOFTWARE with real user data.
 * 
 * This file is licensed under terms of GNU GENERAL PUBLIC LICENSE Version 3
 * (GPL v3). The full text of GPL v3 license is providded in file named LICENSE,
 * residing in the root folder of this repository.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * IPT BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * -->


<div *ngIf="!inToolbar">
  <h2>{{!authService.isUserLoggedIn() ? 'LOGIN' : 'LOGOUT'}}</h2>

  <div class="col-xs-12" *ngIf="message" class="alert">{{message}}</div>
  <div class="error"  *ngIf="errorMessage" class="error-message alert alert-danger">{{errorMessage}}</div>

  <form *ngIf="!authService.isUserLoggedIn()" #loginForm="ngForm" (ngSubmit)="login(loginForm)"
  class="form-horizontal col-xs-12 col-sm-9 col-md-6 col-md-4">

    <div class="form-group">
      <label class="control-label hidded-xs col-sm-3" for="email">Email:</label>
      <div class="col-xs-12 col-sm-9">
        <input ngModel id="email" name="email" placeholder="Email" required email #email="ngModel" class="form-control"/>
      </div>
    </div>
    <div class="error" *ngIf="email.invalid && (email.dirty || email.touched)"  class="alert alert-danger">
        {{ email.errors['required']? 'Email is required' : 'Email is not valid' }}
    </div>

    <div class="form-group">
      <label class="control-label hidded-xs col-sm-3" for="password">Password:</label>
      <div class="col-xs-12 col-sm-9">
        <input ngModel type="password" id="password" name="password" placeholder="Password"
        #password="ngModel" required class="form-control"/>
      </div>
    </div>
    <div class="error" *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger">
        Password is required
    </div>

    <!--{{ loginForm.value | json}} -->
    <div class="col-xs-12">
      <button type="submit" class="btn btn-primary" [disabled]="loginForm.pristine || !loginForm.valid">Login</button>
    </div>
  </form>
</div>

<button *ngIf="inToolbar && !authService.isUserLoggedIn()" type="button" class="btn btn-default"(click)="gotoLogin()">Login</button>
<button *ngIf="inToolbar && authService.isUserLoggedIn()" type="button" class="btn btn-default"(click)="logout()">Logout</button>


